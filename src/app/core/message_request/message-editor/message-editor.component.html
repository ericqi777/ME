
<div class="row">
    <div class="col-sm-8">
        <form #f="ngForm" (ngSubmit)="previewRequest(f.value, content)">
            <div class="container">
                <h4 class="heading">æäº¤æ–°å‘é€ç”³è¯·</h4>
                <span class="text-primary">çŸ­ä¿¡å†…å®¹</span>
            </div>
            <div class="container form-group">
                <div class="input-group">
                    <textarea name="textContent" id="textContent" #inputContent [(ngModel)]="inputContent.value" required #textContent="ngModel" placeholder="è¯·è¾“å…¥çŸ­ä¿¡å†…å®¹ğŸ˜Š"></textarea>
                </div>
            </div>

            <div class="container" id="imageUpload">
                <input style="display: none" type="file" (change)="onSelectImageChanged($event)" #fileInput>
                <button class="btn-primary" (click)="fileInput.click(); $event.preventDefault()">é€‰æ‹©ä¸Šä¼ å›¾ç‰‡</button> 
            
                <span class="alert alert-light" role="alert">
                    å¯é€‰ .jpg/.jpeg/.png æ–‡ä»¶
                </span>
            
                <div id="selectedImage" class="col-sm-10" *ngIf="selectedImage">
                    <span>å·²é€‰å›¾ç‰‡ï¼š {{ selectedImage.name }}</span>
                    <button type="button reset" class="close" (click)="resetImage()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <div class="alert alert-warning alert-sm" role="alert">
                        âš ï¸æ³¨æ„ï¼šå›¾ç‰‡å°†ä½œä¸ºå•ç‹¬çŸ­ä¿¡å‘é€ï¼Œæ”¶ä¿¡äººå°†çœ‹åˆ°ä¸Šå›¾ä¸‹æ–‡ä¸¤æ¡çŸ­ä¿¡ï¼Œå‘é€å›¾ç‰‡æ¶ˆè€—é¢å¤–1å•ä½é…é¢
                    </div>
                </div>
            </div>
            <!-- <div class="container big-mar" >
                <div class="text-primary">è‡ªå®šä¹‰å·æ®µï¼ˆå¯é€‰ï¼Œè‡ªå®šä¹‰å·æ®µå°†ä½œä¸ºç³»ç»Ÿé»˜è®¤å·æ®µçš„é™„åŠ å·æ®µ) </div>
            
                    <input style="display: none" type="file" (change)="onSelectNumberRangeChange($event)" #fileInput>
                    <button class="btn-primary" (click)="fileInput.click()">é€‰æ‹©è‡ªå®šä¹‰å·æ®µ</button>
                    
                    <span class="alert alert-light" role="alert">
                        å¯é€‰ .txt/.csv/.xls æ–‡ä»¶
                    </span>
                    
                    <div id="selectedNumberRange" class="col-sm-10" *ngIf="selectedNumberRange">
                        <span>å·²é€‰å·æ®µæ–‡ä»¶ï¼š {{ selectedNumberRange.name }}</span>
                        <button type="button" class="close" (click)="resetImage()" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
            </div> -->
            
            <div class="container big-mar col-sm-10">
                <div class="text-primary">å‘é€æ•°é‡ </div>
                <div class="form-group">
                    <div class="input-group">
                        <input required [min]="500" #volume="ngModel" name="volume" id="volume" type="number" class="form-control"
                            [(ngModel)]="inputContent.sentVolume">
                    </div>
                    <div class="alert alert-danger" *ngIf="volume.touched && volume.invalid">
                        è¯·è¾“å…¥å‘é€æ•°é‡
                    </div>
                </div>
                
                <button type="submit" [disabled]="volume.invalid || textContent.invalid" class="btn btn-primary">æäº¤å®¡æ ¸</button>
            </div>
        </form>
    </div>
 </div>


    <!-- <form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
        <input name="first" id="textContent" #second [(ngModel)]="second.value" required #first="ngModel">
        <input name="last" ngModel>
        <button>Submit</button>
    </form>
    
    <p>First name value: {{ first.value }}</p>
    <p>First name valid: {{ first.valid }}</p>
    <p>Form value: {{ f.value | json }}</p>
    <p>Form valid: {{ f.valid }}</p> -->

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title text-primary" id="modal-basic-title">çŸ­ä¿¡ç”³è¯·è¯¦æƒ…</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row">
                <form class="col-sm-6">
                    <div class="form-group">
                        <label class="text-primary">ç”³è¯·æ—¶é—´ï¼š</label>
                        <a> {{request.createdAt}}</a>
                        <p></p>
                        <label class="text-primary" >çŸ­ä¿¡å†…å®¹ï¼š</label>
                        <p style="white-space: pre-line"> {{request.textContent}} </p>
                        <label class="text-primary">è®¡ä»·è§„åˆ™ ï¼ˆå‘é€æ•°é‡ * å•æ¬¡æ¡æ•°ï¼‰</label>
                        <p> {{request.sentVolume}}æ¬¡ * {{ request.creditCost / request.sentVolume }} æ¡/æ¬¡</p>
                        <label class="text-primary">é…é¢æ¶ˆè€—ï¼š</label>
                        <p> {{request.creditCost}} </p>
                        <label class="text-primary">ç”³è¯·çŠ¶æ€ï¼š</label>
                        <p>ç­‰å¾…æäº¤</p>
                    </div>
                </form>
                <div class="col-sm-6">
                    <div *ngIf="selectedImage" class="image-preview">
                        <label class="text-primary">å¾…å‘é€å›¾ç‰‡ï¼š</label>
                        <div class="card" style="width: 18rem;">
                            <img [src]="imagePreviewUrl" *ngIf="selectedImage" class="card-img-top">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary nav-link" (click)="submitRequest(); modal.close('Save click')" routerLink="/request-history">ç¡®è®¤æäº¤</button>
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">å–æ¶ˆ</button>
    </div>
</ng-template>